---
layout: post
title: Adding a header-comment to all java-files in a repository
date: '2008-08-25T00:51:00.001+02:00'
author: Jonas Bandi
tags:
- programming
modified_time: '2008-09-18T22:01:27.464+02:00'
blogger_id: tag:blogger.com,1999:blog-5763764290649132593.post-5346663131284111422
blogger_orig_url: http://blog.jonasbandi.net/2008/08/adding-header-comment-to-all-java-files.html
---

I had to add a header comment to all java files in a given repository.
<br/>
Not knowing any better solution, I wrote a groovy script:
<br/>
<div style="border:solid 1px silver;width:95%;overflow:auto">
<div style="width:700px">
<pre style="line-height: 100%;font-family:monospace;background-color:#ffffff"><span style="color:#800000;"> 1 </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">def</span><span style="background-color:#ffffff;"> delClos
</span><span style="color:#800000;"> 2 </span><span style="background-color:#ffffff;">delClos = { </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">println </span></span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">"Checking directory: $</span><span style="background-color:#ffffff;">{</span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.canonicalPath}</span></span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">"</span><span style="background-color:#ffffff;">;
</span><span style="color:#800000;"> 3 </span><span style="background-color:#ffffff;">    </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.eachDir(</span></span><span style="background-color:#ffffff;"> </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">delClos </span></span><span style="background-color:#ffffff;">);
</span><span style="color:#800000;"> 4 </span><span style="background-color:#ffffff;">    </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.eachFile </span></span><span style="background-color:#ffffff;">{
</span><span style="color:#800000;"> 5 </span><span style="background-color:#ffffff;">        </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">if</span><span style="background-color:#ffffff;">(</span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.name </span></span><span style="background-color:#ffffff;">=~ ~</span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">/.*\.java$/</span><span style="background-color:#ffffff;">){
</span><span style="color:#800000;"> 6 </span><span style="background-color:#ffffff;">            </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">def</span><span style="background-color:#ffffff;"> original_text = </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.text;
</span></span><span style="color:#800000;"> 7 </span><span style="background-color:#ffffff;">            </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">if</span><span style="background-color:#ffffff;"> (!</span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">original_text.startsWith(</span></span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'/*'</span><span style="background-color:#ffffff;">)){
</span><span style="color:#800000;"> 8 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">println </span></span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">"Adding header to file: $</span><span style="background-color:#ffffff;">{</span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.canonicalPath}</span></span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">"</span><span style="background-color:#ffffff;">;
</span><span style="color:#800000;"> 9 </span><span style="background-color:#ffffff;">                </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">def</span><span style="background-color:#ffffff;"> className = </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.name.substring(</span></span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;">, </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.name.length(</span></span><span style="background-color:#ffffff;">) - </span><span style="color:#0000ff;background-color:#ffffff;">5</span><span style="background-color:#ffffff;">);
</span><span style="color:#800000;">10 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.delete(</span></span><span style="background-color:#ffffff;">)
</span><span style="color:#800000;">11 </span><span style="background-color:#ffffff;">                </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">def</span><span style="background-color:#ffffff;"> new_file = </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">new</span><span style="background-color:#ffffff;"> File (</span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">it.canonicalPath)
</span></span><span style="color:#800000;">12 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file.createNewFile(</span></span><span style="background-color:#ffffff;">);
</span><span style="color:#800000;">13 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'/*'</span><span style="background-color:#ffffff;">                            &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'
</span><span style="color:#800000;">14 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' * '</span><span style="background-color:#ffffff;"> &lt;&lt; </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">className              </span></span><span style="background-color:#ffffff;">&lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'
</span><span style="color:#800000;">15 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' *'</span><span style="background-color:#ffffff;">                            &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'</span><span style="background-color:#ffffff;"> 
</span><span style="color:#800000;">16 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' * Version $Revision$, $Date$'</span><span style="background-color:#ffffff;"> &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'
</span><span style="color:#800000;">17 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' *'</span><span style="background-color:#ffffff;">                            &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'
</span><span style="color:#800000;">18 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' * Project:  Mayhem'</span><span style="background-color:#ffffff;">           &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'
</span><span style="color:#800000;">19 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' *'</span><span style="background-color:#ffffff;">                            &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'</span><span style="background-color:#ffffff;"> 
</span><span style="color:#800000;">20 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' * (c) 2008 by Tyler Durden'</span><span style="background-color:#ffffff;">   &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'
</span><span style="color:#800000;">21 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">' */'</span><span style="background-color:#ffffff;">                           &lt;&lt;</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">'\n'</span><span style="background-color:#ffffff;"> 
</span><span style="color:#800000;">22 </span><span style="background-color:#ffffff;">                </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">new_file </span></span><span style="background-color:#ffffff;">&lt;&lt; </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">original_text;
</span></span><span style="color:#800000;">23 </span><span style="background-color:#ffffff;">            }
</span><span style="color:#800000;">24 </span><span style="background-color:#ffffff;">        }               
</span><span style="color:#800000;">25 </span><span style="background-color:#ffffff;">    }
</span><span style="color:#800000;">26 </span><span style="background-color:#ffffff;">}
</span><span style="color:#800000;">27 </span><span style="text-decoration:underline;color:#000000"><span style="background-color:#ffffff;">delClos(</span></span><span style="background-color:#ffffff;"> </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">new</span><span style="background-color:#ffffff;"> File(</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">"."</span><span style="background-color:#ffffff;">))</span></pre>
</div>
</div>

This is certainly not the most elegant, clever, performant ... whatsoever solution, but it did the job. If you have a better solution, please leave a comment.
