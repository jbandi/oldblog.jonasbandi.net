---
layout: post
title: ".Net QuickTip: Persisting enums as strings with NHibernate"
date: '2010-04-22T21:25:00.004+02:00'
author: Jonas Bandi
tags:
- ".net"
- hibernate
- quicktip
modified_time: '2010-04-22T21:40:59.683+02:00'
thumbnail: http://lh6.ggpht.com/_X3kaawac_g4/S3LGD9c8gkI/AAAAAAAAAvs/cl4ycQ8APi8/s72-c/image_thumb%5B3%5D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5763764290649132593.post-519286692845956842
blogger_orig_url: http://blog.jonasbandi.net/2010/04/net-quicktip-persisting-enums-as.html
---

<div class="separator" style="clear: both; text-align: center;">
<a href="http://lh6.ggpht.com/_X3kaawac_g4/S3LGD9c8gkI/AAAAAAAAAvs/cl4ycQ8APi8/image_thumb%5B3%5D.png?imgmax=800" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://lh6.ggpht.com/_X3kaawac_g4/S3LGD9c8gkI/AAAAAAAAAvs/cl4ycQ8APi8/image_thumb%5B3%5D.png?imgmax=800" /></a></div>
Scenario: You want to map the values of an enum-typed property of an entity as a string into the database with NHibernate.<br />
<br />
Solution: NHibernate stores enums with their numeric value into the database as default.<br />
In order to save the value as string, you have to use the type attribute of the property element in the xml-mapping.
<br />
As of NHibernate 2.1 you can use the type <code>NHibernate.Type.EnumStringType&lt;T&gt;</code> like this:<br />
<br />
<div style="border: 1px solid silver; clear: right; overflow: auto;">
<div style="width: 800px;">
<pre class="xml:nogutter:nocontrols" name="code">
&lt;property column="DataProviderConst" name="DataProvider"
   type="EnumStringType`1[[My.Namespace.DataProvider, My.Namespace]]"&gt;
</pre>
</div>
</div>
<span style="font-size: x-small;">(note the strange syntax to declare the generic type)</span><br />
<br />
On the web there are floating a lot of articles around, telling that you have to create a derived Type of <code>NHibernate.Type.EnumStringType<t></t></code> for each enum, or generate a generic EnumMapper type.<br />
This is not necessary since NH 2.1. <a href="http://zvolkov.com/blog/post/2009/08/13/Generic-EnumString-Mapping-in-NHibernate-21.aspx">This post</a> finally enlightened me.<br />
<br />
In <a href="http://fluentnhibernate.org/">Fluent NHibernate</a> mapping enums to strings is the default. You don't have to do anything.<br />
Now, if mapping enums to strings is a best practice or an antipattern is a whole different question.
<div style="align:right; font-size: 10px; clear:right; ">
<br/>
<p><a  href="http://twitter.com/jbandi"><img style="margin: 0px 0px 0px 0px" src="http://www.google.com/s2/favicons?domain=twitter.com" alt="http://www.google.com/s2/favicons?domain=twitter.com" border="0" align="left" height="13px"/> follow me on twitter, I need some friends :-)</a></p></div>