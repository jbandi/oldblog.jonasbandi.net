---
layout: post
title: After all, ORM might really be the Vietnam of Computer Sience ...
date: '2011-04-19T22:14:00.006+02:00'
author: Jonas Bandi
tags:
- object-relational mapping
modified_time: '2011-04-20T22:54:13.412+02:00'
thumbnail: http://lh5.ggpht.com/_X3kaawac_g4/TZzMv3pB-dI/AAAAAAAAA9E/ialxzJrmtPY/s72-c/monkey%20thinker.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5763764290649132593.post-4869142580433735902
blogger_orig_url: http://blog.jonasbandi.net/2011/04/after-all-orm-might-really-be-vietnam.html
---

<div style="width: 410px;">
<blockquote style="font-size: 11pt;">
The best DSL I've ever seen for working with data is SQL.</blockquote>
<div align="right">
- Rob Conery, <a href="http://blog.wekeroad.com/microsoft/someone-hit-their-head">Thoughts on WebMatrix</a></div>
<br />
<blockquote style="font-size: 11pt;">
The last mile is what kills object-relational mapping. Rails ActiveRecord does not try to go the last mile.</blockquote>
<div align="right">
- Paul Wilson,<br />
<a href="http://confreaks.net/videos/458-rubyconf2010-automated-acceptance-testing-the-vietnam-of-test-driven-development">The Vietnam of Test Driven Development</a></div>
<br />
<blockquote style="font-size: 11pt;">
Abstracting SQL often isn't a good idea from my experience</blockquote>
<div align="right">
- @codemonkeyism <a href="http://twitter.com/#%21/codemonkeyism/status/33105778176954368">on twitter</a>
</div>
</div>
<br />
<br />
<img alt="Monkey thinker" border="0" src="http://lh5.ggpht.com/_X3kaawac_g4/TZzMv3pB-dI/AAAAAAAAA9E/ialxzJrmtPY/monkey%20thinker.jpg?imgmax=800" style="float: right; margin-left: 10px;" width="180" />
I have a high opinion of <a href="http://stackoverflow.com/">StackOverflow</a>. What they accomplished in a very short time is amazing.<br />
<br />
Reading the news that <a href="http://samsaffron.com/archive/2011/03/30/How+I+learned+to+stop+worrying+and+write+my+own+ORM">StackOverflow is writing its own object-relational mapper</a> made me think ...<br />
<br />
As a consultant I have seen almost no project that did not run into troubles with their ORM infrastructure at some point in time ...<br />
... so maybe Ted Neward was right when he claimed that <b><a href="http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx">ORM is the Vietnam of Computer Science</a></b> more than five years ago.<br />
<br />
<i>I cannot make my mind up on this one...</i><br />
<br />
On one hand, I am a big fan of ORM. I am <a href="http://www.ch-open.ch/wstage/ws-archiv/ws-20100/ws-2010-ws5-domainmodels/">regularly teaching JPA</a>.<br />
On the other hand, I am tearing my hair out, <a href="http://stackoverflow.com/questions/505387/mapping-a-bidirectional-list-with-hibernate">again</a> and <a href="http://stackoverflow.com/questions/1264261/nhibernate-alternates-batch-size/4747457#4747457">again</a>, fighting with ORM frameworks, trying to persuade them to do what I actually want (usually having a very clear idea what I want but having to <a href="http://en.wiktionary.org/wiki/yak_shaving">shave yaks</a> to get there, while in most specific cases it would be easy to just write the SQL I want).<br />
<br />
Maybe it is the ORM <i>frameworks</i> that are the problem?<br />
<br />
For advanced usage scenarios it often feels like ORM frameworks are adding a lot of accidental complexity.<br />
But then again, I think ORM itself represents an essential complexity that always surfaces one way or another... sooner or later ...<br />
<br />
The ORM-Vietnam-Hypothesis talks about quick <b>initial successes</b> and the <b>Law of Diminishing Return</b>.<br />
<br />
Now here are some interesting questions:<br />
<ul>
<li>How valuable are the initial successes?</li>
<li>How long lasts the phase of initial successes?</li>
<li>How can you prolong this phase? </li>
<li>How can you reliably detect that the law of diminishing return kicks in?</li>
</ul>
<img alt="Screen shot 2011 04 06 at 8 24 32 PM" border="0" src="http://lh4.ggpht.com/_X3kaawac_g4/TZzMut0FlsI/AAAAAAAAA88/drAewWS1DIQ/Screen%20shot%202011-04-06%20at%208.24.32%20PM.png?imgmax=800" style="display: block; margin-left: auto; margin-right: auto;" width="250" /><br />
Is it possible to somehow leverage the phase of initial successes and then stop at the right moment and turn to a better solution without loosing all the initial sucesses?<br />
<br />
Is that what StackOverflow is doing, turning away from Linq2Sql now, going for a custom ORM solution?<br />
<br />
StackOverflow started in 2008 and has gone through an amazing evolution since.<br />
They started with a very simple programming stack and very modest hardware, with only some part-time programmers (as far as I remember from the <a href="http://www.hanselman.com/blog/HanselminutesPodcast134StackOverflowUsesASPNETMVCJeffAtwoodAndHisTechnicalTeam.aspx">Hanselminutes podcast</a>). Yet they were able to create a product that influenced the live of most modern programmers... <br />
To achieve this, they had do choose the most pragmatic solutions. I guess Linq2Sql was the obvious choice ...<br />
<br />
<a href="http://3.bp.blogspot.com/-nEg2c-fPYmI/TZzl3ZastPI/AAAAAAAAA9M/3r0tRKX5uw0/s1600/Decision-Making.jpg" style="float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://3.bp.blogspot.com/-nEg2c-fPYmI/TZzl3ZastPI/AAAAAAAAA9M/3r0tRKX5uw0/s320/Decision-Making.jpg" width="170" /></a>

Would StackOverflow be better off if they started with their own ORM implementation from the bginning? 
<br />
Probably not ... I guess they would be at the same point now: They would have to rewrite it today based on their real world requirements and their experience from the last 2 years.<br />
<br />
It seems that this leads us back to the principle that&nbsp;<a href="http://en.wikiquote.org/wiki/Donald_Knuth">Premature Optimization is the Root of all Evil</a>...<br />
<br />
Could this be a general advise:&nbsp;ORM frameworks being there to get you off the ground easily, <i>but prepare for a rewrite later</i>, at least for some parts of your application?<br />
Don't invest too much in your ORM infrastructure, so that you can't turn your back on it once the Law of Diminishing Returns kicks in?<br />
<br />
... and how to achieve this efficiently?<br />
<br />
While I was writing this post <a href="http://www.hanselminutes.com/default.aspx?showID=282">Hanselminute 262</a> was published, interviewing Sam Saffron and Rob Conery about their Micro-ORM implementations <a href="http://www.blogger.com/">Dapper</a> and <a href="https://github.com/robconery/massive">Massive</a>.<br />
Interesting ... <b>Micro-ORMs</b> as the shiny new thing between the overblown <i>swiss-army-knife-style-ORM</i> and the <i>not-invented-here-do-it-yoursef-style-ORM</i>?<br />
The podcast also talks about the fact that a simple "in-line" style of writing apps with fewer abstractions is becoming stylish again ... right the style we condemned and tried to get away from 15 years ago... and how this is related with a modern "getting things done"-mentality ... very interesting indeed.<br />
<span style="font-size: x-small;"><span style="font-size: 10px;"><span style="font-size: medium;"><br /></span></span></span><br />
<div style="clear: right; font-size: 10px;">
<a href="http://twitter.com/jbandi"><img align="left" alt="http://www.google.com/s2/favicons?domain=twitter.com" border="0" height="13px" src="http://www.google.com/s2/favicons?domain=twitter.com" style="border: medium none; margin: 0px;" /> follow me on twitter, I need some friends :-)</a></div>