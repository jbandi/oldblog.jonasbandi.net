---
layout: post
title: ".Net Quick Tip: Deploying an entire directory with MSTest"
date: '2010-03-29T10:04:00.001+02:00'
author: Jonas Bandi
tags: 
modified_time: '2010-03-29T13:23:06.020+02:00'
thumbnail: http://lh6.ggpht.com/_X3kaawac_g4/S3LGD9c8gkI/AAAAAAAAAvs/cl4ycQ8APi8/s72-c/image_thumb%5B3%5D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-5763764290649132593.post-3216670640824697990
---

<div class="separator" style="clear: both; text-align: center;">
<a href="http://lh6.ggpht.com/_X3kaawac_g4/S3LGD9c8gkI/AAAAAAAAAvs/cl4ycQ8APi8/image_thumb%5B3%5D.png?imgmax=800" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://lh6.ggpht.com/_X3kaawac_g4/S3LGD9c8gkI/AAAAAAAAAvs/cl4ycQ8APi8/image_thumb%5B3%5D.png?imgmax=800" /></a></div>
For each test-run MSTest copies all test-relevant artifacts in to a separate directory and executes the test out of this directory. This is called a test deployment.<br />
<br />
This makes running tests that have a dependency to external files a bit more complicated, because relative paths must be rooted according to this deployment directory.<br />
<br />
For this exists the <a href="http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.webtesting.deploymentitemattribute%28VS.80%29.aspx"><code>[DeploymentItem]</code> attribute</a>. With it you can indicate files that should be deployed into the deployment-directory by MSTest, before every test (in order for this to work, the file has to be copied to the ouput directory first, set the property "Copy to Output Directory" in VisualStudio accordingly).<br />
<br />
Copying individual files to the deployment directory was straightforward with this method, however it took me some time to find out how to deploy an <i>entire directory </i>to the deployment directory.<br />
<br />
It is achieved with another overload of the <code>[DeploymentItem]</code> attribute:<br />
<br />
<code>[DeploymentItem("SimulatorData", "SimulatorData")]</code>
<br />
<br />
This copies all the files in the directory "SimulatorData" and puts them in a directory "SimulatorData" in the test-deployment directory.<br />
<br />
In your test-code you can now reference files like this:<br />
<br />
<code>
string simulatorDataFilePath = @".\SimulatorData\SIMULATOR.csv"; <br />
</code>